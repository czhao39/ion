{% extends "eighth/admin/eighth_admin_page_base.html" %}
{% load staticfiles %}

{% block css %}
    {{ block.super }}
    <link rel="stylesheet" type="text/css" href="{% static 'css/eighth.schedule.css' %}" />
{% endblock %}

{% block admin_main %}
    <h2>User Signup</h2>
    {% if show_selection %}
    <form action="{% url 'eighth_admin_distribute_action' %}" method="post" class="schedule-activity-grid">
        <input type="hidden" name="users" value="true" />
        {% csrf_token %}
        <table class="schedule-activity-grid">
            <thead>
                <tr>
                    <th>User</th>
                    {% for sch in schacts %}
                    <th>
                        {{ sch.activity }}<br />
                        on {{ sch.block }}
                    </th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
            {% for user in users %}
            <tr>
                <td>{{ user }}</td>
                {% for sch in schacts %}
                <td>
                    <input type="checkbox" name="schact{{ sch.id }}" value="{{ user.id }}" />
                </td>
                {% endfor %}
            </tr>
            {% endfor %}
            </tbody>
        </table>

        <input type="submit" value="Finish" />
    {% else %}
    <form method="post">{% csrf_token %}
        {{ wizard.management_form }}
        <p>Step {{ wizard.steps.step1 }} of {{ wizard.steps.count }}</p>
        <br>
        {{ wizard.form }}
        {% if wizard.steps.prev %}
            <button name="wizard_goto_step" type="submit" value="{{ wizard.steps.prev }}">Previous Step</button>
        {% endif %}
        {% if wizard.steps.next %}
            <input type="submit" value="Next"/>
        {% else %}
            <input type="submit" value="Distribute Group"/>
        {% endif %}
    {% endif %}
    </form>
{% endblock %}
