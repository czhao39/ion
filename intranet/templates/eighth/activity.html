{% extends "page_with_nav.html" %}
{% load phone_numbers %}
{% load staticfiles %}

{% block title %}{{ block.super }} - Activity: {{ activity }}{% endblock %}


{% block css %}
    {{ block.super }}
    <link rel="stylesheet" type="text/css" href="{% static 'css/eighth.common.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'css/eighth.admin.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'css/profile.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'css/eighth.profile.css' %}" />
    <style type="text/css">
    dl dt, dl dd {
        font-size: 15px;
    }

    dl dt {
        float: left;
        padding-right: 5px;
    }

    tr.cancelled, tr.cancelled th a {
        color: red;
    }
    </style>
{% endblock %}

{% block js %}
    {{ block.super }}
{% endblock %}

{% block main %}
<div class="primary-content">

    {% if request.user.is_eighth_admin %}
        <div class="eighth-header" style="width: 200px">
            {% include "eighth/admin/start_date.html" %}
        </div>
    {% endif %}


    <a href="{% url 'eighth_signup' %}" class="button">
        <i class="fa fa-arrow-left"></i> Sign Up
    </a>

    {% if request.user.is_eighth_admin %}
        <a class="button" href="{% url 'eighth_admin_edit_activity' activity.id %}">
            Edit Activity
        </a>
    {% endif %}

    <h2 style="padding-bottom: 0">Activity: {{ activity }}</h2>
    {% if activity.special %}
        <span class="badge green">Special</span>
    {% endif %}
    {% if activity.restricted %}
        <span class="badge purple">Restricted</span>
    {% endif %}
    {% if activity.sticky %}
        <span class="badge orange">Sticky</span>
    {% endif %}
    {% if activity.both_blocks %}
        <span class="badge blue">Both Blocks</span>
    {% endif %}
    {% if activity.one_a_day %}
        <span class="badge lightblue">One a Day</span>
    {% endif %}
    {% if activity.administrative %}
        <span class="badge">Administrative</span>
    {% endif %}
    {% if activity.presign %}
        <span class="badge yellow">48-hr Presign</span>
    {% endif %}

    <dl style="padding-top: 10px">
        {% if activity.description %}
            <dt>Description:</dt>
            <dd style="width: 400px">{{ activity.description }}</dd>
        {% endif %}

        {% if activity.sponsors.count > 0 %}
            <dt>Default Sponsors:</dt>
            <dd>{% for sponsor in activity.sponsors.all %}
                    {{ sponsor.name }}{% if not forloop.last %}, {% endif %}
                {% endfor %}</dd>
        {% endif %}

        {% if activity.rooms.count > 0 %}
            <dt>Default Rooms:</dt>
            <dd>{% for room in activity.rooms.all %}
                    {{ room }}{% if not forloop.last %}, {% endif %}
                {% endfor %}</dd>
        {% endif %}
        
    </dl>

    <section class="user-info-eighth sponsor">
        <h3>Scheduled on:</h3>
        <table class="fancy-table">
        <thead>
        <tr>
            <th>Block</th>
            <th>Name</th>
            <th>Sponsors</th>
            <th>Rooms</th>
            <th></th>
        </tr>
        </thead>
        <tbody>
        {% for sch in scheduled_activities %}
            <tr{% if sch.cancelled %} class="cancelled"{% endif %}>
                <th>
                    <a href="{% url 'eighth_signup' sch.block.id %}">
                        {{ sch.block }}
                    </a>
                </th>
                <td>
                    {{ sch.full_title }}
                </td>
                <td>
                    {% for sponsor in sch.get_true_sponsors %}
                        {{ sponsor.name }}{% if not forloop.last %}, {% endif %}
                    {% empty %}
                        None
                    {% endfor %}
                </td>

                <td>
                    {% for room in sch.get_true_rooms %}
                        {{ room }}{% if not forloop.last %}, {% endif %}
                    {% empty %}
                        None
                    {% endfor %}
                </td>
                <td>
                    <a class="button" href="{% url 'eighth_signup' sch.block.id %}?activity={{ sch.activity.id }}">
                        {% if sch.cancelled or sch.block.locked %}
                            View Info
                        {% else %}
                            Sign Up
                        {% endif %}
                    </a>
                </td>
            </tr>
        {% empty %}
            <tr>
            <td colspan="4">
                There were no instances of this activity found within the next two months.
            </td>
            </tr>
        {% endfor %}
        </tbody>
        </table>
        <br />
        All meetings of this activity are not guaranteed to appear on this page.
        <br />
        <b>Activity schedules are not fixed, and may change. Check Eighth Period schedules.</b>
        <br />
    </section>

    
</div>
{% endblock %}
